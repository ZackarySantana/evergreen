modules:
  - name: spruce
    owner: evergreen-ci
    repo: spruce
    branch: main
    auto_update: true
  - name: parsley
    owner: evergreen-ci
    repo: parsley
    branch: main
    auto_update: true

#######################################
#              Functions              #
#######################################
functions:
  get-project:
    - command: git.get_project
      type: setup
      params:
        directory: evergreen
        revisions:
          parsley: ${parsley_rev}
          spruce: ${spruce_rev}
#######################################
#                Tasks                #
#######################################

tasks:
  - name: my-task
    commands:
      - func: get-project
      - command: shell.exec
        params:
          script: |
            echo "I finished getting the project and modules"

#######################################
#            Buildvariants            #
#######################################
buildvariants:
  - name: ubuntu2204
    display_name: ubunutu2204
    run_on:
      - ubuntu2204-large
    tasks:
      - name: my-task
    modules:
      - spruce
      - parsley